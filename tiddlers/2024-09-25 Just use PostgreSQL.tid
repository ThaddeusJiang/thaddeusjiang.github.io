created: 20240925091552236
modified: 20240925093629681
published: 20240925093629680
tags: blog $:/plugins/adithyab/tiddlyjam/live
title: 2024-09-25 Just use PostgreSQL
type: text/vnd.tiddlywiki

ä¸€ä¸ªå°ä¾‹å­è§£é‡Šä¸ºä»€ä¹ˆæˆ‘é»˜è®¤é€‰æ‹© PostgreSQL è€Œä¸æ˜¯ SQLiteã€‚

> ä¸ºä»€ä¹ˆè¦è§£é‡Šï¼Ÿ
> ç­”ï¼šlocal-first æœ€è¿‘åˆæµè¡Œèµ·æ¥äº†ï¼ŒJS ç¤¾åŒºçš„ Kent C. Dodds å’Œ Rails ç¤¾åŒºçš„ DHH éƒ½æ¨èä½¿ç”¨ SQLiteã€‚ä½†æ˜¯æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘æ„Ÿè§‰ SQLite ç»å¸¸èƒŒåˆºæˆ‘ã€‚

!! éœ€æ±‚ï¼šä» url ä¸­æå– portï¼Œä¾‹å¦‚ï¼šhttp://localhost:3000/setup -> 3000

```sql
# PostgreSQL
SELECT
    substring(url FROM ':(\d+)') AS port
FROM
    (SELECT 'http://localhost:3000/setup' AS url) AS t;

```

```sql
# SQLite
SELECT
    substr(url, instr(url, ':') + 1, instr(url, '/', instr(url, ':')) - instr(url, ':') - 1) AS port
FROM
    (SELECT 'http://localhost:3000/setup' AS url) AS t;
```

å¯¹æ¯”ä¹‹ä¸‹ï¼ŒPostgres çš„ substring æ¯” SQLite çš„ substr ç®€å•å¤ªå¤šäº†ï¼Œå¼€ç®±å³ç”¨çš„æ„Ÿè§‰çœŸå¥½ã€‚

!! å¦å¤–

æˆ‘ä»Šå¤©å‘ç° Metabase çš„ regexextract è¡¨è¾¾å¼ä¸æ”¯æŒ SQLiteã€‚ğŸ¥²

Doc: https://www.metabase.com/docs/latest/questions/query-builder/expressions-list#regexextract

!! äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨ Postgresã€‚

refs:

* https://www.epicweb.dev/why-you-should-probably-be-using-sqlite
* https://x.com/search?f=tweets&q=sqlite+from:dhh
* https://x.com/search?q=Just%20use%20PostgreSQL
