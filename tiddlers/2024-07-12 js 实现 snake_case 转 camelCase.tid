created: 20240712122547087
modified: 20240712125644078
published: 20240712124127691
tags: blog æœèŠ±å¤•æ‹¾ $:/plugins/adithyab/tiddlyjam/live
title: 2024-07-12 js å®ç° snake_case è½¬ camelCase
type: text/vnd.tiddlywiki

ä»Šå¤©åœ¨ dev-notes ä¸­å‘ç°ä¸€ä¸ªç¬”è®°ï¼ŒåŸæ¥ yup æä¾›äº†å¼€ç®±å³ç”¨çš„ snake_case è½¬ camelCase çš„æ–¹æ³•ã€‚

```js
const schema = object({
  firstName: string().lowercase().trim(),
}).camelCase()

schema.cast({ first_name: "jAnE " }) // { firstName: 'jane' }
```

å¼€ç®±å³ç”¨ï¼ŒçœŸæ£’ã€‚

å› ä¸º js ç¤¾åŒºå‡ ä¹éƒ½åˆ‡æ¢åˆ°äº† zodï¼Œæˆ‘ç°åœ¨ä¹Ÿä¸»è¦ä½¿ç”¨ zodï¼Œæˆ‘å»çœ‹äº†ä¸€ä¸‹ zod çš„æ–‡æ¡£ï¼Œå¥½åƒæ²¡æœ‰å¼€ç®±å³ç”¨çš„ snake_case è½¬ camelCase APIã€‚

å¯èƒ½æ˜¯å°ä¼—éœ€æ±‚å§ã€‚

å¦‚æœæ˜¯ç»å†è¿‡å‰åç«¯åˆ†ç¦»æ˜¯æœ€ä½³å®è·µçš„ç¨‹åºå‘˜åº”è¯¥è¿˜è®°å¾—ï¼Œæ›¾ç»çš„ server side ä¸»æµé‡‡ç”¨ snake_caseã€‚åœ¨ JS å¾ˆç–¯ç‹‚çš„é‚£å‡ å¹´ï¼Œå¾ˆå¤šå¼ºè¿«ç—‡é¡¹ç›®è¦ä¹ˆè¦æ±‚ server-side è¯¥ camelCaseï¼›è¦ä¹ˆ JS app ä¸­ä¹Ÿä½¿ç”¨ snake_caseï¼›è¦ä¹ˆå°±æ˜¯æ‰¾ä¸€ä¸ªè½¬æ¢åº“ï¼Œè‡ªåŠ¨å®ç° snake_case å’Œ camelCase ç›¸äº’è½¬æ¢ã€‚

!! æ’æ›²

æˆ‘è‡ªå·±æ›¾ç»ä¹Ÿåœ¨ snake_case å’Œ camelCase ä¸ŠæŠ˜è…¾è¿‡ä¸€æ®µæ—¶é—´ã€‚

å½“æ—¶çš„å›¢é˜Ÿä¸­ server-side åœ¨ database å’Œ Protobuf ä¸­ä½¿ç”¨ snake_caseï¼Œç„¶è€Œ Protobuf codegen é»˜è®¤ä»…æ”¯æŒ lowerCamelCaseã€‚ç„¶åä»£ç ä¸­å°±å‡ºç°äº†è¶…å¤šè¯¡å¼‚çš„ snake_case å’Œ camelCase ç›¸äº’è½¬æ¢çš„ä»£ç ã€‚ğŸ˜‚

è™½ç„¶ï¼Œåæ¥æˆ‘ä»¬å‘ç°åŸæ¥ Nest.js ä¸­å¯ä»¥è®© gRPC ä¿æŒ snake_caseï¼Œè®¾ç½®å¦‚ä¸‹ï¼š

```diff
const app = await NestFactory.createMicroservice<MicroserviceOptions>(AppModule, {
  transport: Transport.GRPC,
  options: {
    package: 'hero',
    protoPath: join(__dirname, 'hero/hero.proto'),
+    keepCase: true,
  },
});
```

ä½†æ˜¯ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨ã€‚

å› ä¸ºåœ¨ gRPC ä¸­ä½¿ç”¨ snake_case æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œéœ€è¦å„ç§ä¾èµ– libraries çš„æ”¯æŒã€‚ä¸ä»…ä»…æ˜¯ Nest.jsï¼Œè¿˜æœ‰ TypeScriptï¼ŒDark ç­‰ç­‰ã€‚å¤ªæŠ˜è…¾äº†ã€‚

ğŸ˜‚ å…¨æ˜¯æ³ªå•Šï¼Œå½“å‰éƒ½åœ¨çæŠ˜è…¾ä»€ä¹ˆå•Šï¼Œå“ˆå“ˆå“ˆ

refs:

* [[yup|https://github.com/jquense/yup?tab=readme-ov-file#objectcamelcase-schema]]