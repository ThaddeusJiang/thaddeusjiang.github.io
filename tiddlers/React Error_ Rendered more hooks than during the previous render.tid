created: 20250528021106652
modified: 20250528024148453
tags: 
title: React Error: Rendered more hooks than during the previous render
type: text/vnd.tiddlywiki


è®°ä¸€æ¬¡ React Error


[img[https://i.gyazo.com/df35485ecfcf5b0441c33c71c2c3118b.png]]


å…¶å®ä¸Šé¢ error message çœ‹ç€ä¿¡æ¯å¾ˆå¤šï¼Œçœ‹ä¼¼å¾ˆå¤æ‚ï¼Œå…¶å®ä¸éš¾è§£å†³ã€‚æ ¸å¿ƒä¿¡æ¯ `Rendered more hooks than during the previous render.`

Rendered more hooks than during the previous render. æ„å‘³ç€ä»£ç ä¸­æœ‰åŸºäºçŠ¶æ€çš„æå‰è¿”å›ï¼Œé€ æˆäº†åé¢çš„ hooks æ²¡æœ‰è¢«æ‰§è¡Œã€‚

å¸¸è§ä»£ç 

```js
const { isLoading } = useXXX()

if (isLoading) return <Loading />

// Not rendered when isLoading is true, rendered after isLoading becomes false
const { yyy } = useYYY()

return (
   ...
)
```

é€šå¸¸åªéœ€å°† useYYY ç§»åŠ¨åˆ° return å‰å³å¯

```js
const { isLoading } = useXXX()
const { yyy } = useYYY()

if (isLoading) return <Loading />

return (
   ...
)
```

çœ‹åˆ°è¿™é‡Œï¼Œæˆ–è®¸ä¼šæœ‰äººè®¤ä¸ºè¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œæˆ–è€…è®¤ä¸ºå¾ˆå®¹æ˜“è§£å†³ã€‚

!! ç°å®

[img[https://i.gyazo.com/f307974536c39d76716ce4b8afa21aa4.png]]

å½“æˆ‘çœ‹åˆ°è¿™æ®µä»£ç ï¼Œå¹¶ä¸”æäº¤äº† Refactor PR æ—¶ï¼Œé¡¹ç›®ç®¡ç†è€…å’Œå…¶ä»– developers æƒ³æˆ‘æé—®ï¼šâ€œè¿™æ®µä»£ç æœ‰ä¿®æ”¹çš„å¿…è¦å—ï¼Ÿç›®å‰ä»£ç æ²¡æœ‰å‡ºç° bugï¼Œä¿®æ”¹åå‡ºç° bug æ€ä¹ˆåŠï¼Ÿå‡­ä»€ä¹ˆè¯´ä½ çš„ç†è§£æ˜¯æ­£ç¡®çš„ï¼Œå…¶ä»–äººçš„ç†è§£æ˜¯é”™è¯¯çš„ï¼Ÿâ€

æˆ‘ï¼šè‹¦ç¬‘ ğŸ˜‚

!! è¯¾åé¢˜

Q: å½“ useYYY ä¾èµ– useXXX çš„è¿”å›å€¼æ—¶ï¼Œåº”è¯¥å¦‚ä½•è§£å†³ï¼Ÿ

```
const { xxx, isLoading } = useXXX()
if (isLoading) return <Loading />

const { yyy, isLoading: isYYYLoading } = useYYY({ data: xxx })

if (isYYYLoading) return <Loading />

return (
   ...
)
```