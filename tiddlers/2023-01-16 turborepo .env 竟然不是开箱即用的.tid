created: 20230116051407348
modified: 20230116052745289
published: 20230116052745288
tags: blog $:/plugins/adithyab/tiddlyjam/live
title: 2023-01-16 turborepo .env ç«Ÿç„¶ä¸æ˜¯å¼€ç®±å³ç”¨çš„
type: text/vnd.tiddlywiki

turborepo .env ç«Ÿç„¶ä¸æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œéœ€è¦å®‰è£… dotenv-cli å¹¶ä¸”ä¿®æ”¹ npm scriptsã€‚ğŸ¤·

1. å®‰è£… `dotenv-cli` in root

```bash
yarn add dotenv-cli --ignore-workspace-root-check
```

2 åˆ›å»º `.env` in root

```bash
// .env
DATABASE_URL=my-database-url
```

3. ä¿®æ”¹ `package.json` of root

```json
// package.json
{
  "scripts": {
    "dev": "dotenv -- turbo run dev"
  }
}
```

4. éªŒè¯

```bash
yarn dev
```

OKï¼Œç°åœ¨ `process.env.DATABASE_URL` ä¸æ˜¯ undefined äº†ã€‚ğŸ¤·

BTWï¼Œå¦‚æœä½ éœ€è¦åœ¨ build ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œè¿˜éœ€è¦é…ç½® turbo.jsonï¼Œ[[æ–‡æ¡£|https://turbo.build/repo/docs/core-concepts/caching#altering-caching-based-on-environment-variables]] ğŸ¤·


refs:

* https://turbo.build/repo/docs/handbook/dev#using-environment-variables
* https://www.npmjs.com/package/dotenv-cli